<ion-content [fullscreen]="true">
<div class="nav-central">
  <ion-button fill="clear" [routerLink]="['/']">
    <ion-icon src="assets/icon/arrow-back-outline.svg"></ion-icon>
    <span>Inicio</span>
  </ion-button>
  <ion-button fill="clear" [routerLink]="['/perfil']">
    <ion-icon src="assets/icon/person.svg"></ion-icon>
    <span>Perfil</span>
  </ion-button>
  <ion-button fill="clear" [routerLink]="['/carrito']">
    <ion-icon src="assets/icon/cart-outline.svg"></ion-icon>
    <span>Carrito</span>
  </ion-button>
</div>

<div class="search-wrapper">
  <ion-searchbar [(ngModel)]="query" placeholder="Buscar productos..."></ion-searchbar>
</div>

<ion-grid fixed>
  <ion-row>
    <ion-col size="12" sizeSm="6" sizeMd="4" sizeLg="3" sizeXl="2" *ngFor="let p of filteredProducts">
      <ion-card class="product-card">
        <ion-img [src]="p.image" [alt]="p.name"></ion-img>
        <ion-card-content>
          <div class="product-name">{{ p.name | uppercase }}</div>
          <ion-badge *ngIf="getBadgeText(p)" [color]="getBadgeColor(p)" class="product-badge">
            {{ getBadgeText(p) }}
          </ion-badge>
        </ion-card-content>
      </ion-card>
    </ion-col>
  </ion-row>

  <ion-row>
    <ion-col size="12">
      <div class="pagination">
        <span class="label">Página</span>
        <ng-container *ngFor="let n of pagesToShow; let last = last">
          <ion-button size="small" fill="clear" [color]="currentPage === n ? 'primary' : 'medium'" [strong]="currentPage === n" (click)="goToPage(n)">
            {{ n }}
          </ion-button>
          <span class="sep" *ngIf="!last">-</span>
        </ng-container>
        <span class="sep">-</span>
        <span class="ellipsis">...</span>
        <span class="sep">-</span>
        <ion-button size="small" fill="clear" [color]="currentPage === totalPages ? 'primary' : 'medium'" [strong]="currentPage === totalPages" (click)="goToPage(totalPages)">
          {{ totalPages }}
        </ion-button>
      </div>
    </ion-col>
  </ion-row>
</ion-grid>

<!-- Botones flotantes para moverse por la página -->
<ion-fab slot="fixed" vertical="bottom" horizontal="end">
  <ion-fab-button (click)="scrollToTop()" aria-label="Ir arriba">
    <ion-icon name="arrow-up"></ion-icon>
  </ion-fab-button>
</ion-fab>

<ion-fab slot="fixed" vertical="bottom" horizontal="start">
  <ion-fab-button (click)="scrollToBottom()" aria-label="Ir abajo">
    <ion-icon name="arrow-down"></ion-icon>
  </ion-fab-button>
</ion-fab>

</ion-content>